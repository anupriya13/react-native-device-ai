var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _reactNative=require("react-native");var iOSMCPServer=function(){function iOSMCPServer(){(0,_classCallCheck2.default)(this,iOSMCPServer);this.name='ios-device-server';this.type='data-source';this.platform='ios';this.connected=false;this.lastCollected=null;this.capabilities=['ios-system-info','uikit-device-info','core-motion-data','core-location-data','ios-battery-info','app-store-info'];}return(0,_createClass2.default)(iOSMCPServer,[{key:"isAvailable",value:function isAvailable(){return _reactNative.Platform.OS==='ios';}},{key:"connect",value:(function(){var _connect=(0,_asyncToGenerator2.default)(function*(){if(!this.isAvailable()){throw new Error('iOS MCP Server only available on iOS platform');}try{this.connected=true;console.log('iOS MCP Server connected successfully');return{success:true};}catch(error){console.error('Failed to connect iOS MCP Server:',error);throw error;}});function connect(){return _connect.apply(this,arguments);}return connect;}())},{key:"disconnect",value:(function(){var _disconnect=(0,_asyncToGenerator2.default)(function*(){this.connected=false;console.log('iOS MCP Server disconnected');});function disconnect(){return _disconnect.apply(this,arguments);}return disconnect;}())},{key:"isConnected",value:function isConnected(){return this.connected&&this.isAvailable();}},{key:"getType",value:function getType(){return this.type;}},{key:"getCapabilities",value:function getCapabilities(){return this.capabilities;}},{key:"getLastCollected",value:function getLastCollected(){return this.lastCollected;}},{key:"collectData",value:(function(){var _collectData=(0,_asyncToGenerator2.default)(function*(options={}){if(!this.isConnected()){throw new Error('iOS MCP Server not connected');}try{var iosData={};this.lastCollected=new Date().toISOString();iosData.systemInfo=yield this._collectiOSSystemInfo();iosData.deviceInfo=yield this._collectUIKitDeviceInfo();iosData.motionData=yield this._collectCoreMotionData();iosData.batteryInfo=yield this._collectiOSBatteryInfo();iosData.appInfo=yield this._collectAppStoreInfo();iosData.metadata={timestamp:this.lastCollected,source:'ios-mcp-server',platform:'ios',iosVersion:this._getiOSVersion(),dataCollectionMethod:'ios-apis'};return{success:true,data:iosData,timestamp:this.lastCollected,source:this.name};}catch(error){console.error('iOS MCP data collection failed:',error);return{success:false,error:error.message,timestamp:this.lastCollected,source:this.name};}});function collectData(){return _collectData.apply(this,arguments);}return collectData;}())},{key:"_collectiOSSystemInfo",value:(function(){var _collectiOSSystemInfo2=(0,_asyncToGenerator2.default)(function*(){return{timestamp:new Date().toISOString(),systemName:'iOS',systemVersion:'17.1',model:'iPhone',localizedModel:'iPhone',identifierForVendor:'A1B2C3D4-E5F6-7890-ABCD-EF1234567890',source:'ios-uidevice'};});function _collectiOSSystemInfo(){return _collectiOSSystemInfo2.apply(this,arguments);}return _collectiOSSystemInfo;}())},{key:"_collectUIKitDeviceInfo",value:(function(){var _collectUIKitDeviceInfo2=(0,_asyncToGenerator2.default)(function*(){return{timestamp:new Date().toISOString(),deviceType:'iPhone15,2',screenScale:3.0,screenBounds:{width:393,height:852},userInterfaceIdiom:'phone',batteryMonitoringEnabled:true,source:'ios-uikit'};});function _collectUIKitDeviceInfo(){return _collectUIKitDeviceInfo2.apply(this,arguments);}return _collectUIKitDeviceInfo;}())},{key:"_collectCoreMotionData",value:(function(){var _collectCoreMotionData2=(0,_asyncToGenerator2.default)(function*(){return{timestamp:new Date().toISOString(),accelerometer:{x:0.05,y:0.12,z:-0.98},gyroscope:{x:0.001,y:0.002,z:0.003},magnetometer:{x:25.1,y:-30.2,z:-45.3},deviceMotion:{attitude:{roll:0.1,pitch:0.2,yaw:0.3},gravity:{x:0.0,y:0.0,z:-1.0}},isMotionAvailable:true,source:'ios-core-motion'};});function _collectCoreMotionData(){return _collectCoreMotionData2.apply(this,arguments);}return _collectCoreMotionData;}())},{key:"_collectiOSBatteryInfo",value:(function(){var _collectiOSBatteryInfo2=(0,_asyncToGenerator2.default)(function*(){return{timestamp:new Date().toISOString(),batteryLevel:0.78,batteryState:'unplugged',lowPowerModeEnabled:false,thermalState:'nominal',source:'ios-battery-apis'};});function _collectiOSBatteryInfo(){return _collectiOSBatteryInfo2.apply(this,arguments);}return _collectiOSBatteryInfo;}())},{key:"_collectAppStoreInfo",value:(function(){var _collectAppStoreInfo2=(0,_asyncToGenerator2.default)(function*(){return{timestamp:new Date().toISOString(),appVersion:'1.0.0',bundleIdentifier:'com.example.reactnativedeviceai',buildNumber:'1',appStoreReceiptExists:true,source:'ios-app-info'};});function _collectAppStoreInfo(){return _collectAppStoreInfo2.apply(this,arguments);}return _collectAppStoreInfo;}())},{key:"_getiOSVersion",value:function _getiOSVersion(){return'17.1';}},{key:"getiOSInsights",value:(function(){var _getiOSInsights=(0,_asyncToGenerator2.default)(function*(deviceData,query){if(!this.isConnected()){throw new Error('iOS MCP Server not connected');}try{var iosData=yield this.collectData();var insights=this._generateiOSSpecificInsights(iosData.data,query);return{success:true,insights,iosData:iosData.data,query,timestamp:new Date().toISOString()};}catch(error){return{success:false,error:error.message,query,timestamp:new Date().toISOString()};}});function getiOSInsights(_x,_x2){return _getiOSInsights.apply(this,arguments);}return getiOSInsights;}())},{key:"_generateiOSSpecificInsights",value:function _generateiOSSpecificInsights(iosData,query){var insights=[];if(iosData.systemInfo){var _iosData$systemInfo=iosData.systemInfo,systemVersion=_iosData$systemInfo.systemVersion,model=_iosData$systemInfo.model;insights.push(`Running iOS ${systemVersion} on ${model}`);}if(iosData.batteryInfo){var _iosData$batteryInfo=iosData.batteryInfo,batteryLevel=_iosData$batteryInfo.batteryLevel,lowPowerModeEnabled=_iosData$batteryInfo.lowPowerModeEnabled,thermalState=_iosData$batteryInfo.thermalState;if(batteryLevel<0.2){insights.push('Low battery detected - consider enabling Low Power Mode');}if(lowPowerModeEnabled){insights.push('Low Power Mode is active to conserve battery');}if(thermalState!=='nominal'){insights.push(`Device thermal state: ${thermalState} - performance may be reduced`);}}if(iosData.deviceInfo){var _iosData$deviceInfo=iosData.deviceInfo,screenScale=_iosData$deviceInfo.screenScale,userInterfaceIdiom=_iosData$deviceInfo.userInterfaceIdiom;insights.push(`Device optimized for ${userInterfaceIdiom} with ${screenScale}x screen scale`);}return insights.length>0?insights:['iOS system information collected successfully'];}}]);}();var _default=exports.default=iOSMCPServer;