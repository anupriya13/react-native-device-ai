var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _require=require('react-native'),NativeModules=_require.NativeModules,Platform=_require.Platform;var AndroidMCPServer=function(){function AndroidMCPServer(){(0,_classCallCheck2.default)(this,AndroidMCPServer);this.name='android-device-server';this.type='data-source';this.platform='android';this.connected=false;this.lastCollected=null;this.capabilities=['android-system-info','device-manager-access','sensor-data-collection','power-manager-access','package-manager-info','telephony-info'];}return(0,_createClass2.default)(AndroidMCPServer,[{key:"isAvailable",value:function isAvailable(){return Platform.OS==='android';}},{key:"connect",value:(function(){var _connect=(0,_asyncToGenerator2.default)(function*(){if(!this.isAvailable()){throw new Error('Android MCP Server only available on Android platform');}try{this.connected=true;console.log('Android MCP Server connected successfully');return{success:true};}catch(error){console.error('Failed to connect Android MCP Server:',error);throw error;}});function connect(){return _connect.apply(this,arguments);}return connect;}())},{key:"disconnect",value:(function(){var _disconnect=(0,_asyncToGenerator2.default)(function*(){this.connected=false;console.log('Android MCP Server disconnected');});function disconnect(){return _disconnect.apply(this,arguments);}return disconnect;}())},{key:"isConnected",value:function isConnected(){return this.connected&&this.isAvailable();}},{key:"getType",value:function getType(){return this.type;}},{key:"getCapabilities",value:function getCapabilities(){return this.capabilities;}},{key:"getLastCollected",value:function getLastCollected(){return this.lastCollected;}},{key:"collectData",value:(function(){var _collectData=(0,_asyncToGenerator2.default)(function*(options={}){if(!this.isConnected()){throw new Error('Android MCP Server not connected');}try{var androidData={};this.lastCollected=new Date().toISOString();androidData.systemInfo=yield this._collectAndroidSystemInfo();androidData.sensorData=yield this._collectSensorData();androidData.powerInfo=yield this._collectPowerManagerData();androidData.packageInfo=yield this._collectPackageManagerData();androidData.metadata={timestamp:this.lastCollected,source:'android-mcp-server',platform:'android',apiLevel:this._getAPILevel(),dataCollectionMethod:'android-apis'};return{success:true,data:androidData,timestamp:this.lastCollected,source:this.name};}catch(error){console.error('Android MCP data collection failed:',error);return{success:false,error:error.message,timestamp:this.lastCollected,source:this.name};}});function collectData(){return _collectData.apply(this,arguments);}return collectData;}())},{key:"_collectAndroidSystemInfo",value:(function(){var _collectAndroidSystemInfo2=(0,_asyncToGenerator2.default)(function*(){return{timestamp:new Date().toISOString(),manufacturer:'Samsung',model:'Galaxy S23',androidVersion:'13',apiLevel:'33',buildId:'TP1A.220624.014',source:'android-build-info'};});function _collectAndroidSystemInfo(){return _collectAndroidSystemInfo2.apply(this,arguments);}return _collectAndroidSystemInfo;}())},{key:"_collectSensorData",value:(function(){var _collectSensorData2=(0,_asyncToGenerator2.default)(function*(){return{timestamp:new Date().toISOString(),accelerometer:{x:0.1,y:0.2,z:9.8},gyroscope:{x:0.01,y:0.02,z:0.03},magnetometer:{x:23.4,y:-45.6,z:78.9},ambientLight:150.5,proximity:5.0,source:'android-sensor-manager'};});function _collectSensorData(){return _collectSensorData2.apply(this,arguments);}return _collectSensorData;}())},{key:"_collectPowerManagerData",value:(function(){var _collectPowerManagerData2=(0,_asyncToGenerator2.default)(function*(){return{timestamp:new Date().toISOString(),batteryLevel:85,isCharging:false,chargingType:'none',powerSaveMode:false,batteryHealth:'good',temperature:25.5,source:'android-power-manager'};});function _collectPowerManagerData(){return _collectPowerManagerData2.apply(this,arguments);}return _collectPowerManagerData;}())},{key:"_collectPackageManagerData",value:(function(){var _collectPackageManagerData2=(0,_asyncToGenerator2.default)(function*(){return{timestamp:new Date().toISOString(),installedApps:127,systemApps:45,userApps:82,lastAppInstalled:'com.example.app',totalStorageUsed:'45.2 GB',source:'android-package-manager'};});function _collectPackageManagerData(){return _collectPackageManagerData2.apply(this,arguments);}return _collectPackageManagerData;}())},{key:"_getAPILevel",value:function _getAPILevel(){return'33';}},{key:"getAndroidInsights",value:(function(){var _getAndroidInsights=(0,_asyncToGenerator2.default)(function*(deviceData,query){if(!this.isConnected()){throw new Error('Android MCP Server not connected');}try{var androidData=yield this.collectData();var insights=this._generateAndroidSpecificInsights(androidData.data,query);return{success:true,insights,androidData:androidData.data,query,timestamp:new Date().toISOString()};}catch(error){return{success:false,error:error.message,query,timestamp:new Date().toISOString()};}});function getAndroidInsights(_x,_x2){return _getAndroidInsights.apply(this,arguments);}return getAndroidInsights;}())},{key:"_generateAndroidSpecificInsights",value:function _generateAndroidSpecificInsights(androidData,query){var insights=[];if(androidData.systemInfo){var _androidData$systemIn=androidData.systemInfo,manufacturer=_androidData$systemIn.manufacturer,model=_androidData$systemIn.model,androidVersion=_androidData$systemIn.androidVersion;insights.push(`Running Android ${androidVersion} on ${manufacturer} ${model}`);}if(androidData.powerInfo){var _androidData$powerInf=androidData.powerInfo,batteryLevel=_androidData$powerInf.batteryLevel,isCharging=_androidData$powerInf.isCharging,powerSaveMode=_androidData$powerInf.powerSaveMode;if(batteryLevel<20){insights.push('Low battery detected - consider enabling power save mode');}if(powerSaveMode){insights.push('Power save mode is active to extend battery life');}}if(androidData.packageInfo){var _androidData$packageI=androidData.packageInfo,userApps=_androidData$packageI.userApps,totalStorageUsed=_androidData$packageI.totalStorageUsed;insights.push(`${userApps} user apps installed using ${totalStorageUsed} storage`);}return insights.length>0?insights:['Android system information collected successfully'];}}]);}();module.exports=AndroidMCPServer;